---
LCID: ko-kr
Layout: default
Title: "03: 디지털 포렌식?"
Timestamps:
- 2023-07-02
Topic: [ "Hacking" ]
---

# 디지털 포렌식?

- 클라우드 서비스 포렌식
- 데이터 애널리틱스
- 데이터베이스 포렌식
- 삭제 파일 복구
- 디스크 카탈로스
- 디스크 이미징
- 드론 포렌식
- 이메일 파싱
- 파일 카빙
- 포렌식 부트 환경
- etc...

사실 정의가 명확하진 않고,
보통 컴퓨터 범죄와 관련하여 디지털 장치에서 발견되는 자료를 복구하고 조사하는 법과학의 한 분야나 디지털증거를 수집,분석,보존,현출하는데 적용되는 과학기술 및 절차 같은 느낌으로 취급받는다.

# 컴퓨터 구조 이해

디지털 포렌식을 이해하기 위해, 먼저 컴퓨터 구조를 이해해야한다.

- 애플리케이션: 사용자 명령을 처리하기 위한 방법을 정의한 것
- 운영체제: UI정의, 입출력 보조, 자원 관리
- 파일시스템: 자료 기억장치에 파일을 저장/관리하기위한 체계를 정의한 것
- 하드웨어: 컴퓨터 연산을 위해 필요한 자원

Artifects 종류, 툴 사용 방법을 익히기 보다 수집/분석의 대상을 이해하는 과정, "Windows OS의 Artifacts는 왜 남는걸까?"와 같은 의문이 선행되어야 한다.

## 부팅 과정

1. 전원 on
2. CPU 전원 공급
3. ROM 코드 실행
    1. POST(Power On Self Test) 상태 점검
    2. BIOS 실행
    3. 부트로더를 RAM에 적재 및 실행
4. 운영체제 실행
    1. 부트로더가 운영체제를 메모리에 로드 및 실행

- 커널모드에서 명령어는 시스템 자원에 직접 접근하는 것이 가능함
- 운영체제는 커널모드를 관리/감독하는 역할을 수행함
- 유저모드인 상태에서 시스엠 자원에 직접 접근하 수 있는 명령어(Privileged Instruction)가 실행되면 CPU는 인터럽트를 발생시켜 현재 모드를 커널모드로 변경시킴
- 커널 모드를 활용하기위해 유저모드에서 API를 통해 시스템 콜을 호출하는 방법도 있음
- 응용 프로그램과 하드웨어의 통신을 위해 커널이 응용 프로그램에 제공하는 명령어를 시스템 콜이라고 한다.
- 커널이 다룰 수 없는 명령어 수신시 발생하는 것이 블루스크린

## 프리패칭

- 부팅 혹은 파일을 실행할 경우 미리 저장된 정보를 메모리에서 실행하여 실행 속도를 높임
- 목적에 따라 부트 프리패치의 응용프로그램 프리패치로 구분할 수 있음
    - 부트 프리패치 : `NTOSBOOT-BOODFAADD.pf`
    - 응용 프로그램 프리패치 : `<filename>-<filepath hash>.pf`

- 부트 프리패칭
    - 부팅과 관련된 파일이 저장장치에 흩어져 있거나, 단편화되어있어 부팅속도의 저하를 일으킴
    - 프리패쳐에 의해 시스템 부팅시 최대 120초까지 모니터링
    - 프리패칭된 파일을 이용하여 부팅속도 향상

- 응용 프로그햄 프리패칭
    - 응용프로그램 초기 실행시 응용프로그램의 이름, 실행 횟수, 마지막 실행 시간, 볼륨 정보 등 저장

# 애플 디바이스 취약점과 디지털포렌식

- 플라스트 도어: iOS 14부터 추가된 보안 기능으로, 아이 메시지를 통해 실행되는 제로 클릭 공격을 차단하기 위한 기능임.
- 제로 클릭: 악성 첨부 파일이 보이지 않는 아이메시지를 활용하여 사용자의 행위 없이 애플 기기를 감염시키는 공격 방법

제로클릭 실행 시도를 박는 블라스트도어를 우회하여 제로클릭을 실행시킨다

- 샌드박스
    - 모든 앱은 다른 앱이 저장한 파일에 접근하거나 기기에 변경사항을 만들 수 없도록 제한되어 있으며, 이 상채를 생드박스화 되어있다고 표현
- ASLR
    - 비인가된 메모리 변경 공격을 박기 위한 기술
    - 앱이 실행될 때 모든 메모리 영역을 무작위로 
    - 사용한 취약점
         -제로클릭을 실행하기 위해 메모리 커럽션을 일으키고자 함
         - 해당 취약점은 인티져 오버플로우를 활용하여 메모리 커럽션을 일으키고 익스플로잇 시작점으로 활용하였음
- 작동방법
    - 인티저 오버플로우 -> 원격으로 ASLR 무력화 -> 코드 실행 -> 샌드박스 우회
- 실행 흔적
    - 27개의 .gif PSD 파일이 Library/SMS/Attachments 경로에 생성됨
    - 4개의 .gif PDF 파일이 JBIG2-encoded 스트림에 생성됨

# 디지털 포렌식을 공부할때 방향을 잡기 어려운 이유

디지털 포렌식을 통해 풀어야 하는 문제/목적(혐의)가 있어야 하는데 학생 때는 그런 부분이 명확하지 않음.

# 실력을 키우기 위한 이런 저런 가정들

- 해쉬값이 변경되면 무결성은 반드시 깨질까?
- RAID 구성 방식을 고려하지 않은 패 Server에서 Disk를 분리하여 수집한다면?
- 일체형 Desktop을 수집할 경우 어떻게 해야할까?
- TPM 기능이 활성화되어있는 Laptop을 수집해야 하는 경우
- 공장초기화를 한 Mobile Device를 수집하게되면 수행할 수 있는 다른 절차는 무엇일까?
- 수집한 Cloud 상 데이터의 원본 동일성은 어떻게 확인할 수 있을까?
- PC에 연결은 되어있지만, 인식되지 않은 HDD의 데이터는 수집할 수 있을까?
- 최신 판례 동향이 기술적 관점에서 보기에 이상한 부분이 있지는 않은걸까?

# 기타 수업 내용

## 랜섬웨어

어느날 로또 1등에 당첨되었다.
당첨금은 19억, 1등 용지를 본떠만든 순금 50돈 황금로또와 함께 전달받았다.

황금 로또는 1100만원 어치라고 한다.
황금 로또를 위해 금고를 하나 사야겠다.
얼마가 적당할까?

얼만진 몰라도 일단 1100만원이 마지노선일 것 같다.

이렇게, 가격을 명확히 알 수 있는 현실의 물건들은 그 가치를 명확히 알 수 있다.
그럼, 우리의 정보는 얼마일까?
애매하다.

그래서 블랙 해커들은 우리의 정보를 가지고 우리를 협박하기 시작하는데, 이것이 바로 랜섬웨어다.

## 피싱

전화 또는 mail등을 통해 가짜 사이트로 이용자의 접속을 유도하여 금융전보등을 탈취하는 수법이다.

## 파밍

피싱의 한 유형으로 피싱보다 진화한 형태.
이용자 pc를 악성코드에 감염시켜 정상 사이트를 입력해도 가짜 사이트로 접속되어 금융정보 등을 탈취해가는 수법이다.

DNS를 감염시켜 DHCP를 다른 곳으로 보내게 하는 등의 수법을 이용한다.

## 디지털 포렌식 과정

- 사고 전 준비
    - 사고가 발생하기 전, 침해사고 대응팀과 조직적인 대응을 준비
- 사고 탐지 (사고,제일 어려움)
    - 정보보호 및 네트워크 장비에 의한 이상 징후 탐지
    - 관리자에 의한 침해 사고의 분석
- 초기 대응 (해결과정)
    - 
- 대응 전략 쳬계화 (해결과정)
- 데이터 수집 (해결과정,사고조사)
- 데이터 분석 (해결과정,사고조사)
- 보고서 작성 (해결과정)
    - 의사 결정자가 쉽게 이해할 수 있는 형태로 사오게 대한 정확한 보고서를 작성
- 해결

## 생각해볼만한 것

만약, 지하철 노선도에 음란물이 재생되고 있다고 하자.
담당 직원은 즉시 재생을 멈추려고 했지만,
해커 측에서 원격 제어를 막아놓은 듯 하다.
담당 직원은 현장으로 달려가 전원을 차단하고 메모리 카드를 뽑았다.

이런 담당 직원의 대처는 올바른 것인가?

## 디지털 포렌식의 조건

- 적법 절차의 준수
- 원본의 안전한 보존
- 디지털 증거의 무결성 확보
- 증거의 싱뢰성 증명
- 분석 결과의 반복성
- 진정성 유지